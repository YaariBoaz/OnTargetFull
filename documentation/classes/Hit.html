<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>onTarget documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">onTarget documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Classes</li>
  <li >Hit</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/shared/services/balistic-calculator.service.ts</code>
        </p>






            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#x" >x</a>
                            </li>
                            <li>
                                <a href="#y" >y</a>
                            </li>
                        </ul>
                    </td>
                </tr>






        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(xPos: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, yPos: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="588" class="link-to-prism">src/app/shared/services/balistic-calculator.service.ts:588</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>xPos</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>yPos</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="x"></a>
                    <span class="name">
                        <span ><b>x</b></span>
                        <a href="#x"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="587" class="link-to-prism">src/app/shared/services/balistic-calculator.service.ts:587</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="y"></a>
                    <span class="name">
                        <span ><b>y</b></span>
                        <a href="#y"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="588" class="link-to-prism">src/app/shared/services/balistic-calculator.service.ts:588</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>







    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Injectable} from &#x27;@angular/core&#x27;;
import {ShootingService} from &#x27;./shooting.service&#x27;;
import {Subject, Observable} from &#x27;rxjs&#x27;;
import {ApiService, ZeroTableGetObject} from &#x27;./api.service&#x27;;
import {InitService} from &#x27;./init.service&#x27;;

@Injectable({
    providedIn: &#x27;root&#x27;
})
export class BalisticCalculatorService {

    mNumShots &#x3D; 0;
    mZeroHits &#x3D; new Array&lt;ZeroHitData&gt;();
    uiZeroShots &#x3D; new Array&lt;ZeroHitData&gt;();
    divHeight &#x3D; 300;
    divWidth &#x3D; 300;
    moa &#x3D; 0;
    private targetType: TargetType;
    notifyZeroShot &#x3D; new Subject();
    private sessionHits &#x3D; [];

    constructor(private shootingService: ShootingService, private apiService: ApiService, private initService: InitService) {
        this.divHeight &#x3D; this.initService.screenH;
        this.divWidth &#x3D; this.initService.screenW;
        this.getZeroTableInit();


        this.divWidth &#x3D; this.initService.screenW;
        this.divHeight &#x3D; this.initService.screenH;

        if (this.divWidth &gt; this.divHeight) {
            this.divWidth &#x3D; this.divHeight - 100;
        } else {
            this.divHeight &#x3D; this.divWidth - 100;
        }

    }


    resetStats() {
        this.mZeroHits &#x3D; new Array&lt;ZeroHitData&gt;();
        this.uiZeroShots &#x3D; new Array&lt;ZeroHitData&gt;();
        this.mNumShots &#x3D; 0;
    }

    getCentroid(hits) {
        let totalX &#x3D; 0;
        let totalY &#x3D; 0;

        hits.forEach((hit) &#x3D;&gt; {
            totalX +&#x3D; hit.x;
            totalY +&#x3D; hit.y;
        });
        const centerX &#x3D; totalX / hits.length;
        const centerY &#x3D; totalY / hits.length;

        return new Hit(centerX, centerY);
    }

    calcDistance(hitA, hitB) {
        return Math.sqrt(Math.pow((hitA.x - hitB.x), 2) + Math.pow((hitA.y - hitB.y), 2));
    }

    getZeroTableInit() {
        this.getZeroTable({
            ballisticCoefficient: 0.121,
            initialVelocity: 1190,
            sightHeight: 2.5,
            zeroRange: 250,
            boreAngle: 0,
            windangle: 90,
            yIntercept: 0,
            altitude: 0,
            barometer: 29.59,
            temperature: 59,
            relativeHumidity: 0.5,
            windSpeed: 0,
            isMetric: true
        }).subscribe(data &#x3D;&gt; {
            this.shootingService.zeroTable &#x3D; data;
        });
    }


    standardDeviation(hits) {
        const v &#x3D; this.constiance(hits);
        return Math.sqrt(v);
    }

    average(hits) {
        let total &#x3D; 0;
        // tslint:disable-next-line:prefer-for-of
        for (let i &#x3D; 0; i &lt; hits.length; i++) {
            total +&#x3D; hits[i].DisFromCenter;
        }
        const avg &#x3D; total / hits.length;
        return avg;
    }

    constiance(hits) {
        let n &#x3D; 0;
        let mean &#x3D; 0;
        let M2 &#x3D; 0;

        hits.forEach((hit) &#x3D;&gt; {
            const x &#x3D; hit.disFromCenter;
            n &#x3D; n + 1;
            const delta &#x3D; x - mean;
            mean &#x3D; mean + delta / n;
            M2 +&#x3D; delta * (x - mean);
        });

        return M2 / (n - 1);
    }

    calculateGrouping(hits) {
        let maxDix &#x3D; 0;
        for (let i &#x3D; 0; i &lt; hits.length; i++) {
            for (let j &#x3D; 0; j &lt; hits.length; j++) {
                if (i &#x3D;&#x3D;&#x3D; j) {
                    continue;
                }

                const dis &#x3D; this.calcDistance(hits[i], hits[j]);
                if (dis &gt; maxDix) {
                    maxDix &#x3D; dis;
                }
            }
        }

        return maxDix;
    }

    calcDistanceFromCenter(x, y, targetType): number {
        let nominalStep;
        let n;

        if (targetType &#x3D;&#x3D;&#x3D; TargetType.Type_64) {
            nominalStep &#x3D; 15;
            n &#x3D; 1;
            x &#x3D; 0.25 * x - n;
            y &#x3D; 0.25 * y - n;
            y -&#x3D; 0.5;
            x -&#x3D; 0.5;
        } else if (targetType &#x3D;&#x3D;&#x3D; TargetType.Type_16) {
            nominalStep &#x3D; 7;
            n &#x3D; 5;
            x &#x3D; 0.25 * x - n;
            y &#x3D; 0.25 * y - n;
            y -&#x3D; 0.5;
            x -&#x3D; 0.5;
        } else // case of 128 target
        {
            if (targetType &#x3D;&#x3D;&#x3D; TargetType.Type_128 &amp;&amp;
                this.shootingService.chosenTarget &#x3D;&#x3D;&#x3D; &#x27;e128n2&#x27; ||
                this.shootingService.chosenTarget &#x3D;&#x3D;&#x3D; &#x27;e128n4&#x27;) {
                nominalStep &#x3D; 8;
                x &#x3D; x / nominalStep;
                y &#x3D; y / nominalStep;
            }
            // else
            {
                return Math.sqrt(Math.pow((245 - x), 2) + Math.pow((245 - y), 2)) / 10;
            }
        }
        return 1.905 * Math.sqrt(Math.pow((nominalStep / 2 - x), 2) + Math.pow((nominalStep / 2 - y), 2));
    }

    calcPostions(x, y, targetType) {
        let nominalStep;
        let n;

        if (targetType &#x3D;&#x3D;&#x3D; TargetType.Type_64) {
            nominalStep &#x3D; 15;
            n &#x3D; 1;
            x &#x3D; 0.25 * x - n;
            y &#x3D; 0.25 * y - n;
            y -&#x3D; 0.5;
        } else if (targetType &#x3D;&#x3D;&#x3D; TargetType.Type_16) {
            nominalStep &#x3D; 7;
            n &#x3D; 5;
            x &#x3D; 0.25 * x - n;
            y &#x3D; 0.25 * y - n;
            y -&#x3D; 0.5;
            x -&#x3D; 0.5;
        } else // case of 128 target
        {
            if (targetType &#x3D;&#x3D;&#x3D; TargetType.Type_128 &amp;&amp;
                this.shootingService.chosenTarget &#x3D;&#x3D;&#x3D; &#x27;e128n2&#x27; ||
                this.shootingService.chosenTarget &#x3D;&#x3D;&#x3D; &#x27;e128n4&#x27;) {

                nominalStep &#x3D; 8;
                x &#x3D; x / nominalStep;
                y &#x3D; y / nominalStep;
            }
            // else
            {
                const disPointFromCenter128 &#x3D; Math.sqrt(Math.pow((245 - x), 2) + Math.pow((245 - y), 2)) / 10;
                x &#x3D; ((this.divWidth / 490) * x) - 7;
                y &#x3D; (this.divHeight / 490) * y;

                const data128 &#x3D; new ZeroHitData(x, y);
                data128.DisFromCenter &#x3D; disPointFromCenter128;
                return data128;
            }
        }


        const w &#x3D; this.divWidth;
        const h &#x3D; this.divHeight;
        const xStep &#x3D; w / nominalStep;
        const yStep &#x3D; h / nominalStep;

        let xPos &#x3D; (xStep * x);
        let yPos &#x3D; yStep * y;


        const disPointFromCenter &#x3D; 1.905 * Math.sqrt(Math.pow((nominalStep / 2 - x), 2) + Math.pow((nominalStep / 2 - y), 2));


        const data &#x3D; new ZeroHitData(xPos, yPos);
        data.DisFromCenter &#x3D; disPointFromCenter;
        return data;
    }

    calcNapar(doDraw, targetType) {

        // tslint:disable-next-line:prefer-const
        const range &#x3D; this.shootingService.selectedDrill.range;
        let path2CM &#x3D; 0.6; // this is a table that you need to build in startup  m_zeroTable[m_DrillInfo.Range].PathCM;
        path2CM &#x3D; this.shootingService.zeroTable[range].pathCM;
        path2CM &#x3D; 3;
        let val &#x3D; 36 - path2CM * 2;
        let dataNapar;
        const targertName &#x3D; JSON.parse(localStorage.getItem(&#x27;slectedTarget&#x27;)).name;

        if (targetType &#x3D;&#x3D;&#x3D; TargetType.Type_128) {
            if (targertName &#x3D;&#x3D;&#x3D; &#x27;e128n2&#x27; || targertName &#x3D;&#x3D;&#x3D; &#x27;e128n4&#x27;)// (target is 128 and the id is e128n2 or e128n4)
            {
                dataNapar &#x3D; this.calcPostions(245 / 7.55, val, targetType);
            } else {
                const middleYPointInCM &#x3D; 24.5;
                val &#x3D; (middleYPointInCM - path2CM) * 10;
                dataNapar &#x3D; this.calcPostions(245, val, targetType);
            }
        } else {
            dataNapar &#x3D; this.calcPostions(32, val, targetType);
        }
        return {
            napar: dataNapar,
            yNapar: val,
            doDraw
        };
    }

    calcNapam(hits) {

        const centerHit &#x3D; this.getCentroid(hits);
        const center &#x3D; new ZeroHitData(centerHit.x, centerHit.y);
        let maxDisBetweenPoints &#x3D; 0;

        // tslint:disable-next-line:prefer-for-of
        for (let i &#x3D; 0; i &lt; hits.length; i++) {
            hits[i].DisFromCenter &#x3D; this.calcDistance(hits[i], center);
        }

        const std &#x3D; this.standardDeviation(hits);
        const avg &#x3D; this.average(hits);

        if (hits.length &gt; 2) {
            hits.forEach((hit, i) &#x3D;&gt; {
                {
                    const dr &#x3D; Math.abs(hit.disFromCenter - std);
                    if (dr &gt; avg) {
                        console.log(&#x27;Found Anmoly:[{&#x27; + hit.x + &#x27;},{ &#x27; + hit.y + &#x27;}]&#x27;);
                        hit.isBarhan &#x3D; true;
                        this.sessionHits[i].isBarhan &#x3D; true;
                        this.sessionHits[i].DisFromCenter &#x3D; hit.DisFromCenter;
                    } else {
                        hit.isBarhan &#x3D; false;
                        this.sessionHits[i].DisFromCenter &#x3D; hit.DisFromCenter;
                        this.sessionHits[i].isBarhan &#x3D; false;
                    }
                }
                ;
            });

            const hitWithoutBarhans &#x3D; hits.filter((item) &#x3D;&gt; {
                return item.isBarhan &#x3D;&#x3D;&#x3D; false;
            });

            maxDisBetweenPoints &#x3D; this.calculateGrouping(hitWithoutBarhans);
            const newNapam &#x3D; this.getCentroid(hitWithoutBarhans);

            return {
                napam: newNapam,
                grouping: maxDisBetweenPoints
            };
        } else {
            return {
                napam: centerHit,
                grouping: maxDisBetweenPoints
            };
        }
    }

    getZeroStatus(napar2napamDis, maxDisBetweenPoints) {
        if (maxDisBetweenPoints &gt; 20) {
            return &#x27;Scattered&#x27;;
        } else {
            if (napar2napamDis &lt; 3) {
                return &#x27;Zeroed&#x27;;
            } else {
                return &#x27;Shoot Again&#x27;;
            }
        }
    }

    calcClicks(disFromNAPARInInches, xy, range, clickMOA) {
        const normalized1MOA &#x3D; (range / 100.0) * 1.26;
        const moaDistance &#x3D; disFromNAPARInInches / 2.54 / normalized1MOA;
        const clicks &#x3D; Math.round(moaDistance / clickMOA);
        return clicks;
    }

    setClickViews(napam, napar, devider, range, moa, targetType) {
        const napar2napamDis &#x3D; this.calcDistance(new ZeroHitData(napam.napam.x, napam.napam.y), new ZeroHitData(napar.x, napar.y));
        const leftOrRightClicks &#x3D; this.calcClicks(Math.abs(napam.napam.x - napar.x) / devider, &#x27;X&#x27;, range, moa);
        const upOrDownClicks &#x3D; this.calcClicks(Math.abs(napam.napam.y - napar.y) / devider, &#x27;Y&#x27;, range, moa);

        let right &#x3D; 0;
        let left &#x3D; 0;
        let up &#x3D; 0;
        let down &#x3D; 0;

        if (targetType &#x3D;&#x3D;&#x3D; TargetType.Type_128) {
            if (true)// (target is !![not]!! 128 and the id is e128n2 or e128n4)
            {
                if (napam.napam.x &gt; napar.x) {
                    right &#x3D; leftOrRightClicks;
                } else {
                    left &#x3D; leftOrRightClicks;
                }
            } else {
                if (napam.napam.x &lt; napar.x) {
                    right &#x3D; leftOrRightClicks;
                } else {
                    left &#x3D; leftOrRightClicks;
                }
            }
        } else {
            if (napam.napam.x &gt; napar.x) {
                right &#x3D; leftOrRightClicks;
            } else {
                left &#x3D; leftOrRightClicks;
            }
            if (napam.napam.y &gt; napar.y) {
                up &#x3D; upOrDownClicks;
            } else {
                down &#x3D; upOrDownClicks;
            }

        }


        return {
            rightClick: right,
            leftClick: left,
            upclick: up,
            downClick: down,
            isBarhan: false,
            napar2Napam: napar2napamDis,
            status: undefined,
            naparResults: undefined,
            naparView: undefined,
            napamToView: undefined
        };
    }

    calcGrouping(hits) {
        let disGroup &#x3D; 0;
        const group &#x3D; new ZeroHitData(0, 0);
        const nonBarahnHits &#x3D; [];
        hits.forEach(item &#x3D;&gt; {
            if (!item.isBarhan) {
                nonBarahnHits.push(item);
            }
        });
        const ordered: ZeroHitData[] &#x3D; nonBarahnHits.sort((n1, n2) &#x3D;&gt; n2.DisFromCenter - n1.DisFromCenter);
        if (ordered.length &gt;&#x3D; 2) {
            const a &#x3D; new Hit(ordered[0].x, ordered[0].y);
            const b &#x3D; new Hit(ordered[1].x, ordered[1].y);
            disGroup &#x3D; Math.sqrt(Math.pow((a.x - b.x), 2) + Math.pow((a.y - b.y), 2)) / 10;
            let xN &#x3D; 0;
            let yN &#x3D; 0;

            nonBarahnHits.forEach(item &#x3D;&gt; {
                xN +&#x3D; item.x;
                yN +&#x3D; item.y;
            });

            group.x &#x3D; xN / nonBarahnHits.length;
            group.y &#x3D; yN / nonBarahnHits.length;
        }
        const returnObject &#x3D; {
            disGroup,
            hit: new Hit(group.x, group.y)
        };
        return returnObject;

    }

    updateZeroTableAndTargetUI(x, y, isBarhan, disFromCenter) {
        const data &#x3D; this.calcPostions(x, y, this.targetType);
        // m_DrillInfo.RawHitsLocation.Add(new Hit(x, y));
        // m_DrillInfo.HitsWithViewAdjustments.Add(new Hit(data.XPosition, data.YPositon));
        const uiHitData &#x3D; new ZeroHitData(data.x, data.y);
        uiHitData.isBarhan &#x3D; isBarhan;
        uiHitData.DisFromCenter &#x3D; disFromCenter;
        uiHitData.index &#x3D; this.mNumShots;
        this.uiZeroShots.push(uiHitData);

        this.uiZeroShots.forEach((hit) &#x3D;&gt; {
            const hitMatch &#x3D; this.mZeroHits.find(element &#x3D;&gt; element.index &#x3D;&#x3D;&#x3D; hit.index);
            hit.isBarhan &#x3D; hitMatch.isBarhan;
        });


        const napamToView &#x3D; this.calcGrouping(this.sessionHits);
        return napamToView;
    }

    updateShot(x, y, hits) {
        // new hit arrvies
        // determent which target is this (16,64,128)
        this.sessionHits &#x3D; hits;
        debugger
        try {
            this.mNumShots++;
            const timesStrings &#x3D; {}; // get splittime and total time for the hits
            let adjusments &#x3D; 0.4688;
            let midPoint &#x3D; 36;
            let devider &#x3D; 1;
            const targertName &#x3D; JSON.parse(localStorage.getItem(&#x27;slectedTarget&#x27;)).name;
            this.setTargetType(targertName);

            if (this.targetType &#x3D;&#x3D;&#x3D; TargetType.Type_128) {
                adjusments &#x3D; 1;
                midPoint &#x3D; 245;
                devider &#x3D; 10;
                if (this.targetType &#x3D;&#x3D;&#x3D; TargetType.Type_128 &amp;&amp; (targertName &#x3D;&#x3D;&#x3D; &#x27;e128n2&#x27; || targertName &#x3D;&#x3D;&#x3D; &#x27;e128n4&#x27;)) {
                    x &#x3D; x / 7.59;
                    y &#x3D; y / 7.52;
                    adjusments &#x3D; 0.4688;
                    midPoint &#x3D; 36;
                    devider &#x3D; 1;
                }
            }

            const naparResults &#x3D; this.calcNapar(false, this.targetType);
            const naparData &#x3D; new Hit((adjusments * midPoint), adjusments * naparResults.yNapar);
            const naparView &#x3D; new Hit(naparResults.napar.x, naparResults.napar.y);
            const naparToCalcClikcs &#x3D; new Hit(naparData.x, naparData.y);

            // Add New Hit
            const newHit &#x3D; new Hit(adjusments * x, adjusments * y);
            const newZeroHit &#x3D; new ZeroHitData(newHit.x, newHit.y);
            newZeroHit.index &#x3D; this.mNumShots;
            this.mZeroHits.push(newZeroHit);

            // Get NAPAM

            let napamToCalcClicks &#x3D; this.calcNapam(this.mZeroHits);
            let isBarhan &#x3D; false;
            if (this.sessionHits[this.sessionHits.length - 1].isBarhan) {
                isBarhan &#x3D; true;
            }
            if (!napamToCalcClicks) {
                napamToCalcClicks &#x3D; {
                    napam: {x: 0, y: 0},
                    grouping: null
                };
            }

            const latestHitData &#x3D; this.sessionHits[this.sessionHits.length - 1];
            const napamDistanceFromCenter &#x3D; this.calcDistanceFromCenter(x, y, this.targetType);
            const napamToView &#x3D; this.updateZeroTableAndTargetUI(latestHitData.x, latestHitData.y,
                latestHitData.isBarhan, napamDistanceFromCenter);
            const clicks &#x3D; this.setClickViews(napamToCalcClicks, naparToCalcClikcs, devider,
                this.shootingService.selectedDrill.range, this.shootingService.getMOABySight(), this.targetType);
            let status;
            if (napamToCalcClicks.grouping &gt; 10) {
                status &#x3D; &#x27;Scattered&#x27;;
            } else if (napamToCalcClicks.grouping &lt; 10 &amp;&amp; napamToCalcClicks.grouping &gt; 5) {
                status &#x3D; &#x27;Good Grouping&#x27;;
            }else{
                status &#x3D; &#x27;Excellent&#x27;;
            }
            clicks.status &#x3D; status;
            clicks.isBarhan &#x3D; isBarhan;
            clicks.naparResults &#x3D; naparResults;
            clicks.napamToView &#x3D; napamToView.hit;
            clicks.naparView &#x3D; naparView;
            clicks.napar2Napam &#x3D; napamToView.disGroup;
            return clicks;
            if (this.mNumShots &#x3D;&#x3D;&#x3D; this.shootingService.numberOfBullersPerDrill) {
                const zeroStatus &#x3D; this.getZeroStatus(clicks.napar2Napam, napamToCalcClicks.grouping);
                clicks.status &#x3D; zeroStatus;
                clicks.naparResults &#x3D; naparResults;
                clicks.napamToView &#x3D; napamToView;
                clicks.naparView &#x3D; naparView;


                return clicks;
            }
        } catch {

        }
    }

    lastShot() {
        // do your last shot logic (restart, save to db upload drill etc...)
    }

    setTargetType(name) {
        if (name &#x3D;&#x3D;&#x3D; &#x27;003&#x27; || name.indexOf(&#x27;64&#x27;)) {
            this.targetType &#x3D; TargetType.Type_64;
        } else if (name.indexOf(&#x27;128&#x27;) &gt; -1) {
            this.targetType &#x3D; TargetType.Type_128;
        } else {
            this.targetType &#x3D; TargetType.Type_16;
        }
    }

    onControlLoaded() {
        this.calcNapar(true, TargetType.Type_128);
    }


    getZeroTable(data: ZeroTableGetObject): Observable&lt;any&gt; {
        return this.apiService.getZeroTable(data);
    }

    getCaliberMapping(): Observable&lt;any&gt; {
        return this.apiService.getCaliberMapping();
    }

    getCalibersTable(): Observable&lt;any&gt; {
        return this.apiService.getCalibersTable();
    }

    getWepons(): Observable&lt;any&gt; {
        return this.apiService.getWepons();
    }

    getSightsZeroing(): Observable&lt;any&gt; {
        return this.apiService.getSightsZeroing();
    }

    getBullets(): Observable&lt;any&gt; {
        return this.apiService.getBullets();
    }


    getBallisticData(weaponName, sightName) {
        return this.apiService.getBallisticData(weaponName, sightName);
    }
}

class ZeroHitData {

    x: number;
    y: number;
    index: number;
    DisFromCenter: number;
    isBarhan: boolean;

    constructor(xPos: number, yPos: number) {
        this.x &#x3D; xPos;
        this.y &#x3D; yPos;
        this.isBarhan &#x3D; false;
    }
}

class Hit {

    x: number;
    y: number;

    constructor(xPos: number, yPos: number) {
        this.x &#x3D; xPos;
        this.y &#x3D; yPos;
    }
}

enum TargetType {
    Type_128,
    Type_64,
    Type_16,
    Type_PUP
}

</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'Hit.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>

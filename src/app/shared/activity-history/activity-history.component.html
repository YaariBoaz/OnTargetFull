<section class="activity-history">
    <header>
        <div class="title-and-back">
            <div class="back-button" (click)="onBackPressed()">
                <svg xmlns="http://www.w3.org/2000/svg" width="27.656" height="35" viewBox="0 0 27.656 35">
                    <defs>
                        <filter id="Arrow_" width="27.656" height="35" x="0" y="0" filterUnits="userSpaceOnUse">
                            <feOffset dy="3"/>
                            <feGaussianBlur result="blur" stdDeviation="3"/>
                            <feFlood flood-opacity=".161"/>
                            <feComposite in2="blur" operator="in"/>
                            <feComposite in="SourceGraphic"/>
                        </filter>
                    </defs>
                    <g filter="url(#Arrow_)">
                        <path id="Arrow_2" fill="rgba(0,0,0,0.6)" fill-rule="evenodd"
                              d="M720.456 1174.787a.721.721 0 0 0 1 0 .69.69 0 0 0 0-.988l-7.554-7.438 7.552-7.18a.686.686 0 0 0 0-.984.712.712 0 0 0-1 0l-8.441 8.164z"
                              data-name="Arrow" transform="translate(-703.01 -1151.99)"/>
                    </g>
                </svg>
            </div>
            <p class="title"> Training Log</p>
        </div>
        <div class="img-and-date">
            <div class="img-container">
                <img src="assets/icons/calendar.svg">
            </div>
            <div class="date-detials">
                <div class="date">
                    <span style="font-weight: bold;">{{currentDate | date: 'dd.MM.yyyy'}},</span> <span>{{dayName}}</span>
                </div>
                <div class="drill-count">
                    <span> {{trains.length}} drills</span>
                </div>
            </div>
        </div>
    </header>
    <div style="overflow-y: auto;" class="cards" scrollY="true">
        <div *ngFor="let train of trains;let i=index;" class="cards-row">
            <div class="card">
                <div class="target">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
                            <path id="goal" fill="#fff"
                                  d="M16.679 4.3l.873-.873a.527.527 0 0 0-.329-.9L15.6 2.4 15.467.777a.527.527 0 0 0-.9-.328l-.873.873A9 9 0 0 0 2.636 15.364 9 9 0 0 0 16.679 4.3zM14.59 2.929a.528.528 0 0 0 .481.481l.929.079-1.258 1.261-1.375-.116-.117-1.376L14.511 2zM10.793 9a1.795 1.795 0 1 1-.955-1.584L8.627 8.627a.527.527 0 1 0 .746.746l1.211-1.211a1.781 1.781 0 0 1 .209.838zM10.6 6.649a2.851 2.851 0 1 0 .746.746l1.506-1.506a4.963 4.963 0 1 1-.746-.746zm4.013 7.969A7.945 7.945 0 1 1 3.382 3.382a7.949 7.949 0 0 1 9.544-1.291l-.595.595a.527.527 0 0 0-.154.359v.058l.071.841a6.017 6.017 0 1 0 1.806 1.806l.841.071h.127l.033-.006.021-.005.032-.01.02-.007.031-.013.019-.009.03-.017.018-.01.03-.022.014-.01a.523.523 0 0 0 .041-.037l.595-.595a7.949 7.949 0 0 1-1.291 9.544zm0 0"/>
                        </svg>
                    </div>
                    <div class="stats">
                        <p class="counter">DRILL # {{i + 1}}</p>
                        <p>{{train.pointsGained}} points</p>
                    </div>
                    <div class="date">
                        <span>{{train.sessionDateTime |  date:"MM/dd hh:mm"}}</span>
                    </div>
                </div>
                <div class="score">
                    <div class="hits">
                        <p class="score-value"><b>{{train.rawHitsLocation.length}}/ {{train.numberOfBullets}}</b></p>
                        <p>HITS</p>
                    </div>
                    <div class="range">
                        <b>{{train.range}}</b>
                        <p>RANGE</p>
                    </div>
                </div>

                <div class="show-more" [ngClass]="{'active': openShowMore }" style=" margin: 0.5em;">
                    <div *ngIf="!train.openShowMore" (click)="train.openShowMore = !train.openShowMore;"
                         style="display: flex;justify-content: center;     color: #707070;align-items: center;flex-direction: column;">
                        <span class="see-target">SEE TARGET</span>
                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 16 5"
                             style=" width: 16px;  height: 5px;">
                            <defs>
                                <style>.cls-1555 {
                                    fill: #707070;
                                }</style>
                            </defs>
                            <title>Group 846</title>
                            <g id="Group_846" data-name="Group 846">
                                <path id="Rectangle_1895" data-name="Rectangle 1895" class="cls-1555"
                                      d="M1,0H15a1,1,0,0,1,1,1h0a1,1,0,0,1-1,1H1A1,1,0,0,1,0,1H0A1,1,0,0,1,1,0Z"/>
                                <path id="Rectangle_1896" data-name="Rectangle 1896" class="cls-1555"
                                      d="M1,3H15a1,1,0,0,1,1,1h0a1,1,0,0,1-1,1H1A1,1,0,0,1,0,4H0A1,1,0,0,1,1,3Z"/>
                            </g>
                        </svg>
                    </div>
                    <div class="hidden-content" #container>
                        <ng-container *ngIf="train.openShowMore">
                            <div class="hidden-content-container">
                                <div *ngIf="train.drillType === drillTypeEnum.Regular">
                                    <img src="assets/targets/64/e64_score.png" [style.height.px]="targetW"
                                         [style.width.px]="targetW">
                                </div>
                                <div *ngIf="train.drillType === drillTypeEnum.Zero">
                                    <img src="assets/targets/64/e64_Zero.png" [style.height.px]="targetW"
                                         [style.width.px]="targetW">
                                </div>
                                <div *ngIf="train.drillType === drillTypeEnum.Hostage">
                                    <img src="assets/targets/64/Hostage_png_e64.png" [style.height.px]="targetW" [style.width.px]="targetW">
                                </div>
                                <div class="hit" *ngFor="let shot of train.rawHitsLocation; let i = index"
                                     style="position: absolute;"
                                     [style.top.px]=shot.y
                                     [style.left.px]=shot.x>
                                    {{i + 1}}
                                </div>
                                <table>
                                    <thead>
                                    <tr>
                                        <th>
                                            <p>Bullet</p>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                 viewBox="0 0 24 24">
                                                <defs>
                                                    <style>
                                                        .cls-3 {
                                                            fill: #fff
                                                        }
                                                    </style>
                                                </defs>
                                                <g id="Icon_Favorite_Filled" data-name="Icon / Favorite / Filled"
                                                   transform="translate(-2 -1)">
                                                    <path id="Box" fill="none" d="M0 0H24V24H0z"
                                                          transform="translate(2 1)"/>
                                                    <rect id="Rectangle_1747" width="24" height="24" fill="#373737"
                                                          data-name="Rectangle 1747"
                                                          rx="5" transform="translate(2 1)"/>
                                                    <g id="_002-bullet" data-name="002-bullet"
                                                       transform="translate(6.164 5)">
                                                        <path id="Path_1178"
                                                              d="M15.689.136A.464.464 0 0 0 15.361 0h-.007A6.58 6.58 0 0 0 11.3 1.58l-1.7.851a.463.463 0 0 0-.12.087L1.5 10.5a.463.463 0 0 0-.141.183L.838 11.9l-.046-.046a.464.464 0 0 0-.656.656l3.177 3.177a.464.464 0 0 0 .656-.656l-.046-.046 1.223-.522a.463.463 0 0 0 .183-.141l7.978-7.978a.463.463 0 0 0 .087-.12l.851-1.7A6.58 6.58 0 0 0 15.824.471a.463.463 0 0 0-.136-.335zM3.217 14.28l-1.672-1.672.4-.935 2.208 2.208zm1.745-.9l-2.517-2.517L9.807 3.5l2.516 2.516zm7.892-8.144l-2.265-2.264.888-.446L13.3 4.347zm.989-1.656l-1.6-1.6A5.644 5.644 0 0 1 14.85.976a5.607 5.607 0 0 1-1.008 2.603z"
                                                              class="cls-3" data-name="Path 1178"
                                                              transform="translate(-.001)"/>
                                                        <path id="Path_1179"
                                                              d="M213.051 237.636l-1.007 1.007a.464.464 0 0 0 .656.656l1.007-1.007a.464.464 0 0 0-.656-.656z"
                                                              class="cls-3" data-name="Path 1179"
                                                              transform="translate(-205.358 -230.16)"/>
                                                    </g>
                                                </g>
                                            </svg>
                                        </th>
                                        <th>
                                            <p>Split</p>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                 viewBox="0 0 24 24">
                                                <g id="Icon_Favorite_Filled" data-name="Icon / Favorite / Filled"
                                                   transform="translate(-.057)">
                                                    <path id="Box" fill="none" d="M0 0H18V18H0z"
                                                          transform="translate(3.057 3)"/>
                                                    <rect id="Rectangle_1867" width="24" height="24" fill="#363636"
                                                          data-name="Rectangle 1867" rx="5"
                                                          transform="translate(.057)"/>
                                                    <path id="_005-split" fill="#fff"
                                                          d="M11.985 2.209L9.776 0 7.567 2.209l.663.663 1.078-1.078v1.89a2.354 2.354 0 0 1-.808 1.78L6.66 7.055a3.355 3.355 0 0 0-.671.795 3.2 3.2 0 0 0-.659-.79l-1.84-1.6a2.354 2.354 0 0 1-.813-1.78V1.794l1.078 1.078.663-.663L2.209 0 0 2.209l.663.663L1.74 1.794v1.89a3.291 3.291 0 0 0 1.136 2.488l1.84 1.595a2.346 2.346 0 0 1 .8 1.77V12h.937V9.542a2.36 2.36 0 0 1 .824-1.78l1.832-1.59a3.291 3.291 0 0 0 1.136-2.488v-1.89l1.078 1.078zm0 0"
                                                          data-name="005-split" transform="translate(5.937 6)"/>
                                                </g>
                                            </svg>
                                        </th>
                                        <th>
                                            <p>Time</p>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                 viewBox="0 0 24 24">
                                                <defs>
                                                    <style>
                                                        .cls-3 {
                                                            fill: #fff
                                                        }
                                                    </style>
                                                </defs>
                                                <g id="Icon_Favorite_Filled" data-name="Icon / Favorite / Filled"
                                                   transform="translate(.286)">
                                                    <path id="Box" fill="none" d="M0 0H18V18H0z"
                                                          transform="translate(2.714 3)"/>
                                                    <rect id="Rectangle_1866" width="24" height="24" fill="#363636"
                                                          data-name="Rectangle 1866" rx="5"
                                                          transform="translate(-.286)"/>
                                                    <g id="_003-time" data-name="003-time"
                                                       transform="translate(6.218 6)">
                                                        <g id="Group_624" data-name="Group 624">
                                                            <g id="Group_623" data-name="Group 623">
                                                                <path id="Path_1180"
                                                                      d="M6 0a6 6 0 1 0 6 6 6 6 0 0 0-6-6zm0 11.143A5.143 5.143 0 1 1 11.143 6 5.143 5.143 0 0 1 6 11.143z"
                                                                      class="cls-3" data-name="Path 1180"/>
                                                            </g>
                                                        </g>
                                                        <g id="Group_626" data-name="Group 626"
                                                           transform="translate(2.143 2.143)">
                                                            <g id="Group_625" data-name="Group 625">
                                                                <path id="Path_1181"
                                                                      d="M89.19 85.333a.429.429 0 0 0-.429.429v3h-3a.429.429 0 0 0 0 .857h3.429a.429.429 0 0 0 .429-.429v-3.428a.429.429 0 0 0-.429-.429z"
                                                                      class="cls-3" data-name="Path 1181"
                                                                      transform="translate(-85.333 -85.333)"/>
                                                            </g>
                                                        </g>
                                                    </g>
                                                </g>
                                            </svg>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let shot of train.shotItems; let i = index">
                                        <td>{{i + 1}}</td>
                                        <td> {{shot.timeSplit}}</td>
                                        <td> {{shot.time}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <div class="close-panel-container" (click)="train.openShowMore = !train.openShowMore;">
                                    <mat-icon aria-hidden="false" aria-label="Example home icon">keyboard_arrow_up
                                    </mat-icon>
                                </div>

                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

